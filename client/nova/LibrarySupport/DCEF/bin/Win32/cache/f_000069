/**
 * @description : 该文件用于控制视频首页(焦点图切换、搜凤、推荐位、登录和播放记录、图片懒加载、直播节目单、收藏)
 * @version     : 2.1.0
 * 
 */
function cb_login(){}(function(){"use strict";var e={params:{fcDomId:"js_focus_box",focusChangeTime:5e3,fcDom:null,moveTime:200,autoMoveFlag:!0,wordsListDom:null,wordsListFocusBgDom:null,wordsInterval:"",imgsListDom:null,imgsCurMoveDom:null},model:{curIndex:0},view:{},controller:{}};e.params.init=function(){var t=e.params;return t.fcDom=F.query("#"+t.fcDomId)[0],t.wordsListDom=F.query("#js_words_list")[0],t.imgsListDom=F.query("#js_imgs_list")[0],t.wordsListFocusBgDom=F.query("#js_wfocus_bg")[0],typeof t.fcDom=="undefined"?!1:typeof t.wordsListDom=="undefined"?!1:typeof t.imgsListDom=="undefined"?!1:typeof t.wordsListFocusBgDom=="undefined"?!1:!0},e.controller.init=function(){var t=e.params,n=e.controller;t.init()&&(n.eventInit(),n.focusAutoMove())},e.controller.eventInit=function(){var t=e.controller,n=e.params,r=e.model;F.on(F.find(n.wordsListDom,"li"),"mouseenter",function(){n.autoMoveFlag=!1;var e=parseInt(F.attr(this,"data-num"),10);return r.curIndex!==e&&(r.curIndex=e,t.focusMove(e)),!1}),F.on(n.fcDom,"mouseleave",function(){n.autoMoveFlag=!0})},e.controller.focusAutoMove=function(){var t=e.controller,n=e.model,r=e.params;setInterval(function(){r.autoMoveFlag&&(n.curIndex++,n.curIndex>3&&(n.curIndex=0),t.focusMove(n.curIndex))},r.focusChangeTime)},e.controller.focusMove=function(t){e.controller.imgsFM(t),e.controller.wordsFM(t)},e.controller.wordsFM=function(t){var n=e.params,r=t*75;F.each(F.find(n.wordsListDom,"li"),function(e,t){F.removeClass(t,"current")}),F.addClass(F.find(n.wordsListDom,"li")[t],"current"),F.stop(n.wordsListFocusBgDom,!1,!0),F.animate(n.wordsListFocusBgDom,{top:r+"px"},n.moveTime)},e.controller.imgsFM=function(t){var n=e.params,r=!1,i;t===0&&n.autoMoveFlag&&(F.append(n.imgsListDom,F.clone(F.find(n.imgsListDom,".picture_box")[0])),r=!0),i=F.find(n.imgsListDom,".picture_box");var s=t===0&&r?2160:t*540;i.length===5&&t===1&&(F.css(n.imgsListDom,"marginLeft","0px"),F.remove(F.find(n.imgsListDom,".picture_box")[4])),F.stop(n.imgsListDom,!1,!0),F.animate(n.imgsListDom,{marginLeft:s*-1+"px"},n.moveTime)},e.controller.init()})(),function(){"use strict";var e={params:{searchId:"js_top_search",urls:{associateUrl:"http://so.v.ifeng.com/sofeng/suggest",keywordsUrl:"http://f4.ifeng.com/508df9aec9e2a/data/allhot.js"},tSearchInputId:"s_input",tSearchBtnId:"s_button_top",bSearchInputId:"js_btSearch",key:{UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8,LEFT:37,RIGHT:39},searchDom:null,tSearchInputDom:null,tSearchBtnDom:null,bSearchInputDom:null,dropListDom:null,dropListLeftDom:null,dropListRightDom:null,focusFlag:!1},model:{defKeyword:"",cache:""},view:{},controller:{}};e.model.getAssociateResult=function(){var t=e.model,n=e.controller,r=e.params,i=t.cache;if(i==="")return!1;F.ajax({url:r.urls.associateUrl,data:{q:i},dataType:"jsonp",success:n.showAssociteResult})},e.model.getDefKeywords=function(t){var n=e.params;F.ajax({url:n.urls.keywordsUrl+"?21&amp;_="+(new Date).valueOf(),dataType:"jsonp"});var r=setInterval(function(){if(typeof SOFENG_HOTWORD!="undefined"&&SOFENG_HOTWORD!==""){var e="";e=SOFENG_HOTWORD[0].hotwords,clearInterval(r),t(e)}},200)},e.params.init=function(t){var n=e.params;if(typeof t=="undefined")return n.searchDom=F.query("#"+n.searchId)[0],n.tSearchInputDom=F.query("#"+n.tSearchInputId)[0],n.tSearchBtnDom=F.query("#"+n.tSearchBtnId)[0],n.bSearchInputDom=F.query("#"+n.bSearchInputId)[0],typeof n.searchDom=="undefined"?!1:typeof n.tSearchInputDom=="undefined"?!1:typeof n.tSearchBtnDom=="undefined"?!1:!0;t==="detail"&&(n.dropListLeftDom=F.query("#js_sfdp_left")[0],n.dropListRightDom=F.query("#js_sfdp_right")[0],n.dropListDom=F.query("#rList")[0])},e.controller.init=function(){var t=e.controller,n=e.model,r=e.params,i=e.view;r.init()&&(n.getDefKeywords(function(e){r.tSearchInputDom.value=e,n.defKeyword=e,typeof r.bSearchInputDom!="undefined"&&(r.bSearchInputDom.value=e)}),F.append(r.searchDom,i.dropDownList()),r.init("detail"),t.eventInit())},e.controller.eventInit=function(){var t=e.params,n=e.model,r=e.controller.process;F.on(t.tSearchInputDom,"focus",function(){return r.inputFocus(),!1}),typeof t.bSearchInputDom!="undefined"&&(F.on(t.bSearchInputDom,"focus",function(){return this.value===n.defKeyword&&(this.value=""),!1}),F.on(t.bSearchInputDom,"blur",function(){return this.value===""&&(this.value=n.defKeyword),!1}));var i="";typeof t.tSearchInputDom.oninput!="undefined"?i="input":i="propertychange",F.on(t.tSearchInputDom,i,function(e){return r.inputChange(e),!1}),F.on(t.tSearchInputDom,"keyup",function(e){return r.dctKeyUp(e),!1}),F.on(t.tSearchInputDom,"blur",function(){return r.inputBlur(),!1}),F.on(t.dropListLeftDom,"mouseenter",function(){return r.listMouseEnter(this),!1},{delegate:"li"}),F.on(t.dropListDom,"click",function(){var e=F.attr(this,"data-val");return window.open(r.url(e)),!1},{delegate:".js_list_keyword"}),F.on(t.tSearchBtnDom,"click",function(){return r.btnClick(),!1})},e.controller.process={},e.controller.process.inputFocus=function(){var t=e.params,n=e.model;t.focusFlag=!0;var r=t.tSearchInputDom.value;r===n.defKeyword&&(t.tSearchInputDom.value=""),r===""?(F.hide(t.dropListDom),F.html(t.dropListLeftDom,""),F.html(t.dropListRightDom,"")):n.defKeyword!==r&&(n.cache=r,clearTimeout(window.serachTimeout),window.serachTimeout=setTimeout(n.getAssociateResult,250))},e.controller.process.dctKeyUp=function(t){var n=e.controller.process,r=e.params;switch(t.keyCode){case r.key.UP:F.css(r.dropListDom,"display")!=="none"&&(r.focusFlag=!1,n.listUp());break;case r.key.DOWN:F.css(r.dropListDom,"display")!=="none"&&(r.focusFlag=!1,n.listDown());break;case r.key.RETURN:n.btnClick();break;default:}},e.controller.process.inputChange=function(){var t=e.params,n=e.model;if(!t.focusFlag)return;var r=t.tSearchInputDom.value;r===""?(F.hide(t.dropListDom),F.html(t.dropListLeftDom,""),F.html(t.dropListRightDom,""),n.cache=""):r!==n.cache&&(n.cache=r,clearTimeout(window.serachTimeout),window.serachTimeout=setTimeout(n.getAssociateResult,200))},e.controller.process.btnClick=function(){var t=e.params,n=e.controller.process,r=t.tSearchInputDom.value;r!==""&&window.open(n.url(r))},e.controller.process.inputBlur=function(){var t=e.params,n=e.model;t.focusFlag=!1,t.tSearchInputDom.value===""&&(t.tSearchInputDom.value=n.defKeyword),setTimeout(function(){F.hide(t.dropListDom),F.html(t.dropListLeftDom,""),F.html(t.dropListRightDom,"")},300)},e.controller.process.listMouseEnter=function(t,n){var r=e.params,i=F.find(r.dropListLeftDom,"li"),s=F.attr(t,"data-url")?F.attr(t,"data-url"):"";if(typeof n!="undefined"&&n==="keyup"){var o=F.attr(F.find(t,"a"),"data-val");r.tSearchInputDom.value=o}F.each(i,function(e,t){F.hasClass(t,"hover")&&F.removeClass(t,"hover"),F.hasClass(t,"on_hover")&&F.removeClass(t,"on_hover")}),F.hasClass(t,"on")?F.addClass(t,"on_hover"):F.addClass(t,"hover"),s!==""?F.ajax({url:s,dataType:"script",success:function(){}}):F.hide(r.dropListRightDom)},e.controller.process.listUp=function(){var t=e.controller.process,n=e.params,r=F.find(n.dropListLeftDom,"li"),i=!1,s=-1;F.each(r,function(e,t){if(F.hasClass(t,"hover")||F.hasClass(t,"on_hover"))return i=!0,s=e,!1}),i?s===0?t.listMouseEnter(r[r.length-1],"keyup"):(s--,t.listMouseEnter(r[s],"keyup")):t.listMouseEnter(r[r.length-1],"keyup")},e.controller.process.listDown=function(){var t=e.controller.process,n=e.params,r=F.find(n.dropListLeftDom,"li"),i=!1,s=-1;F.each(r,function(e,t){if(F.hasClass(t,"hover")||F.hasClass(t,"on_hover"))return i=!0,s=e,!1}),i?s===r.length-1?t.listMouseEnter(r[0],"keyup"):(s++,t.listMouseEnter(r[s],"keyup")):t.listMouseEnter(r[0],"keyup")},e.controller.process.en=function(){},e.controller.process.url=function(e){var t=typeof SEARCH_PARAM!="undefined"?SEARCH_PARAM.url:"./video";return t+="?q="+encodeURIComponent(e)+"&c="+(typeof SEARCH_PARAM!="undefined"?SEARCH_PARAM.c:""),t},e.controller.showAssociteResult=function(t){var n=e.params,r=e.view,i=[];t.length>0&&(F.each(t,function(e,t){i[e]={keyword:t,name:"",type:"",url:""},F.each(SOFENG_KEYWORD,function(n,r){if(r.name===t)return i[e]={keyword:t,name:r.name,type:r.type,url:r.url},!1})}),F.html(n.dropListLeftDom,r.dropDownLeftWordList(i)),F.show(n.dropListDom))},e.view.dropDownList=function(){var e=[];return e.push('<div style="display:none;" class="tipsbox" id="rList">'),e.push('<div class="tipslink">'),e.push('<ul id="js_sfdp_left"></ul>'),e.push("</div>"),e.push('<div class="tipsabout" style="display:block;">'),e.push('<div id="js_sfdp_right"></div>'),e.push("</div>"),e.push("</div>"),e.join("")},e.view.dropDownLeftWordList=function(e){var t=[];return F.each(e,function(e,n){n.type===""?t.push("<li>"):(t.push('<li class="on" data-url="'+n.url+'"'),t.push(' data-type="'+n.type+'" data-name="'+n.name+'">')),t.push('<a href="javascript:void(0);" data-val="'+n.keyword+'"'),t.push(' class="js_list_keyword">'+n.keyword+"</a>"),t.push("</li>")}),t.join("")},e.view.dropDownRightImgList=function(e){var t=[];return t.push('<ul class="tipspic">'),F.each(e.list,function(e,n){if(e>1)return!1;t.push("<li>"),t.push('<div class="tipspicbox">'),t.push('<a target="_blank" href="'+n.pageUrl+'">'),t.push('<span class="tipspicbox_pop"></span>'),t.push('<span class="tipspicbox_pop_txt">'+n.time+"</span>"),t.push('<img src="'+n.smallPoster+'" alt="" title="'+n.title+'">'),t.push("<em>"+n.title+"</em>"),t.push('<span class="photos_shadow"><i></i></span>'),t.push("</a>"),t.push("</div>"),t.push("</li>")}),t.push("</ul>"),t.push('<div class="tipsmore">'),t.push('<a href="javascript:void(0);" class="js_list_keyword"'),t.push(' data-val="'+e.columnTitle+'">查看所有&gt;&gt;</a>'),t.push("</div>"),t.join("")},e.view.dropDownRightWordList=function(e){var t=[];return t.push('<ul class="tipsList">'),F.each(e.videoInfo,function(e,n){if(e>3)return!1;t.push("<li>"),t.push("<h5>"),t.push('<a href="'+n.player_url+'" target="_blank">'+n.v_title+"</a>"),t.push("</h5>"),t.push("<span>"+n.occur_time+"</span>"),t.push("</li>")}),t.push("</ul>"),t.push('<div class="tipsmore">'),t.push('<a href="javascript:void(0);" class="js_list_keyword"'),t.push(' data-val="'+e.r_keywords+'">查看所有&gt;&gt;</a>'),t.push("</div>"),t.join("")},window.SOFENG_LANMU=function(t){var n=e.view,r=e.params;F.show(r.dropListRightDom),F.html(r.dropListRightDom,n.dropDownRightImgList(t))},window.SOUFENG_TUIJIE=function(t){var n=e.view,r=e.params;F.show(r.dropListRightDom),F.html(r.dropListRightDom,n.dropDownRightWordList(t))},e.controller.init()}(),function(){"use strict";var e={params:{rmdDomId:"js_recommend",autoMoveTime:5e3,remDom:null,listDom:null,moveTime:300,moveLock:!1,autoMoveFlag:!0,pageLeftDom:null,pageRightDom:null},model:{curIndex:0,totCounts:0,moveDesc:0},view:{},controller:{}};e.model.init=function(){var t=e.model,n=e.params;t.totCounts=F.find(n.listDom,"li").length,t.descInit()},e.model.descInit=function(){var t=e.model,n=e.params,r=F.find(n.listDom,"li")[0],i=F.width(r),s=F.css(r,"marginRight")===""?"15px":F.css(r,"marginRight");s=parseInt(s.substr(0,s.indexOf("px")),10),t.moveDesc=i+s},e.params.init=function(){var t=e.params;return t.remDom=F.query("#"+t.rmdDomId)[0],typeof t.remDom=="undefined"?!1:(t.pageLeftDom=F.query("#js_rem_left")[0],t.pageRightDom=F.query("#js_rem_right")[0],t.listDom=F.query("#js_rem_list")[0],!0)},e.controller.init=function(){var t=e.controller,n=e.model,r=e.params;r.init()&&(n.init(),t.eventInit(),t.autoMove())},e.controller.autoMove=function(){var t=e.params,n=e.controller.process;setInterval(function(){t.autoMoveFlag&&n.nextPage()},t.autoMoveTime)},e.controller.move=function(t){var n=e.params,r=e.model,i=r.moveDesc*t;n.moveLock=!0,F.animate(n.listDom,{marginLeft:i+"px"},n.moveTime,{callback:function(){n.moveLock=!1,r.curIndex=t}})},e.controller.eventInit=function(){var t=e.params,n=e.model,r=e.controller.process;F.on(t.pageLeftDom,"click",function(){return r.prevPage(),!1}),F.on(t.pageRightDom,"click",function(){return r.nextPage(),!1}),F.on(t.remDom,"mouseover",function(){t.autoMoveFlag=!1}),F.on(t.remDom,"mouseout",function(){t.autoMoveFlag=!0}),F.on(window,"resize",function(){n.descInit()})},e.controller.process={},e.controller.process.nextPage=function(){var t=e.params,n=e.model,r=n.totCounts;if(!t.moveLock){var i=n.curIndex;if(i===(r-5)*-1){var s=F.find(t.listDom,"li")[0];F.append(t.listDom,s),F.css(t.listDom,"marginLeft",n.moveDesc*(i+1)+"px")}else i--;e.controller.move(i)}},e.controller.process.prevPage=function(){var t=e.params,n=e.model,r=n.totCounts;if(!t.moveLock){var i=n.curIndex;if(i===0){var s=F.find(t.listDom,"li")[r-1];F.preppend(t.listDom,s),F.css(t.listDom,"marginLeft","-135px")}else i++;e.controller.move(i)}},e.controller.init()}();var commonHeader=function(){"use strict";var e={stopEvent:function(e){e&&e.preventDefault?e.preventDefault():window.event.returnValue=!1}},t={urls:{logout:"http://my.ifeng.com/logout",msgCounts:"http://comment.ifeng.com/getv.php",checkUrl:"http://blog.ifeng.com/misc.php?script=getUsername"},msgCounts:0,userName:"",loginAuto:!1,init:function(){var e=t;e.service.init()},service:{loginFirstLoad:!0,callback:null,init:function(){var e=t.service;e.outerEventInit(),e.loginStateInit()},outerEventInit:function(){var e=F.query(".js_login"),n=F.query(".js_register"),r=t.service;F.on(e,"click",function(){return r.login(),!1}),F.on(n,"click",function(){window.open("http://my.ifeng.com/?_c=register&_a=new-account")})},loginStateInit:function(){if(window.IS_LOGIN()){var e=t.service;e.loginInterface()}},loginInterface:function(e){window.REG_LOGIN_CALLBACK(1,function(n){var r=t.service,i="string"==typeof n?n:n.uname;i=decodeURIComponent(i),r.userName=i,r.loginSuccess(i),typeof e!="undefined"&&e(i)}),window.REG_LOGIN_CALLBACK(2,function(){t.css.showFlash()}),window.GLOBAL_LOGIN()},login:function(e){if("undefined"!=typeof window["GLOBAL_LOGIN"]){var n=t.service;n.loginInterface(e)}t.css.hideFlash()},loginSuccess:function(e){t.css.showFlash();if(typeof video_list!="undefined")video_list.cloud.get();else var n=setInterval(function(){typeof video_list!="undefined"&&(clearInterval(n),video_list.cloud.get())},500);var r=t.service;F.hide(F.query("#header_loginBtn")),F.hide(F.query("#header_regBtn")),F.html(F.query("#js_showLoginName"),e),F.show(F.query("#header_userSpan")),F.html(F.query("#comment_loginuser"),'<a href="http://my.ifeng.com/?_c=index&amp;_a=my" title="'+e+'" class="commentLogin" target="_blank">'+e+"</a>"),r.afterLoginEventInit(),r.getMsgCount(),r.loginAuto?F.cookie.setByEncode("autologin","1","/",".ifeng.com",14400):F.cookie.setByEncode("autologin","0","/",".ifeng.com",14400),typeof window.initSubscibe=="function"&&window.initSubscibe(),r.callback&&(r.callback(),r.callback=null)},afterLoginEventInit:function(){var e=t.service,n=F.query("#header_userName")[0],r=F.query("#header_userSpan")[0],i=F.query("#header_userLogout")[0];F.off(n,"mouseover","headerOver"),F.off(r,"mouseout","headerOut"),F.off(i,"click","headerUserLogout"),F.on(n,"mouseover",function(){if(e.loginFirstLoad){e.loginFirstLoad=!1;var t=F.query("#header_userCenter"),r=document.createElement("iframe");F.attr(r,"class","minicenter"),F.attr(r,"id","cen_iframe"),F.attr(r,"frameborder","0"),F.attr(r,"scrolling","no"),F.insertBefore(t,r)}F.hasClass(n,"hover")||F.addClass(n,"hover"),F.show(F.query(".minicenter")[0]),F.show(F.query("#cen_iframe")[0]),F.show(F.query("#header_userCenter"))},{nameSpace:"headerOver"}),F.on(r,"mouseout",function(e){var t=e.relatedTarget||e.toElement;while(t!==this&&t)try{t=t.parentNode}catch(r){break}t!==this&&(F.hasClass(n,"hover")&&F.removeClass(n,"hover"),F.hide(F.query(".minicenter")[0]),F.hide(F.query("#cen_iframe")[0]),F.hide(F.query("#header_userCenter")))},{nameSpace:"headerOut"}),F.on(i,"click",function(){F.cookie.setByEncode("recImport","","/","v.ifeng.com"),e.logout()},{nameSpace:"headerUserLogout"})},getUname:function(){var e=t.service;return e.userName},logout:function(){var e=window.location.href;window.location=t.urls.logout+"?backurl="+e},getMsgCount:function(){var e=F.html(F.query("#js_showLoginName")[0]),n=t.service;if(e!==""){var r="_="+(new Date).getTime();r+="&job=16",r+="&format=js",r+="&username="+e;var i=t.urls.msgCounts;i+="?"+r,F.ajax({url:i,dataType:"jsonp",success:function(e){if(e.count!==0&&e.count!==n.msgCounts){n.msgCounts="<span>"+e.count+"+</span>",t.css.showNewMsg(n.msgCounts);var r=[];r.push(F.query("#js_newMsgCounts")[0]),F.attr(F.query(".minicenter a")[2],"href","http://my.ifeng.com/?_c=user&_a=hand"),F.off(r,"click","newMsgCounts"),F.on(r,"click",function(){t.css.hideNewMsg(),window.open("http://my.ifeng.com/?_c=user&_a=hand")},{nameSpace:"newMsgCounts"})}else e.count===0&&(n.msgCounts=e.count,t.css.hideNewMsg())},callback:"getMsgCB"})}}},css:{showNewMsg:function(e){var t=F.query("#js_newMsg")[0],n=F.query("#js_newMsgDiv")[0],r=F.query("#js_newMsgCounts")[0];F.show(t),F.show(n),F.html(r,e+"")},hideNewMsg:function(){var e=F.query("#js_newMsg")[0],t=F.query("#js_newMsgDiv")[0],n=F.query("#js_newMsgCounts")[0];F.hide(e),F.hide(t),F.html(n,"0")},hideFlash:function(){var e=F.query("#js_video")[0];F.css(e,"visibility","hidden");var t=F.query("#js_playVideo")[0];typeof t!="undefined"&&t.videoPause&&t.videoPause()},showFlash:function(){var e=F.query("#js_video")[0];F.css(e,"visibility","visible");var t=F.query("#js_playVideo")[0];typeof t!="undefined"&&t.videoPlay&&t.videoPlay()}}};t.init();var n={getUname:t.service.getUname,login:t.service.login};return n}(),video_list=function(){"use strict";var video_list={_firstFlag:!0,recordFirstLoad:!0,_delAllFlag:!1};return video_list.init=function(){window.IS_LOGIN()&&(F.hide(F.query("div.toolbar")[1]),F.cookie.getByEncode("recImport")==="true"?(F.css(F.query("#rec_iframe")[0],"height","287px"),F.show(F.query("#place_holder")[0]),F.hide(F.query("div.toolbar")[0])):(F.show(F.query("div.toolbar")[0]),F.hide(F.query("#place_holder")[0])));var e=F.find(F.query("div.clear_play"),"a")[0],t=F.find(F.query("div.clear_play"),"a")[1],n=F.query("#header_record")[0],r=F.query("div.minisee")[0],i=F.query("#importRecords")[0];F.on(e,"click",video_list.delAll),F.on(t,"click",function(){var e="http://my.ifeng.com/?_c=video&_a=records",t="http://my.ifeng.com/?backurl=%3F_c=video%26_a=records";window.IS_LOGIN()?window.open(e):window.open(t)}),F.on(r,"mouseover",function(){var e=video_list;if(e.recordFirstLoad){e.recordFirstLoad=!1;var t=F.query("#record_container"),n=document.createElement("iframe");F.attr(n,"class","miniseebox"),F.attr(n,"id","rec_iframe"),F.attr(n,"frameborder","0"),F.attr(n,"scrolling","no"),F.insertBefore(t,n),window.IS_LOGIN()?video_list.cloud.get():video_list.local.get()}F.show(F.query("#record_container")[0]),F.hasClass(r,"hover")||(F.addClass(r,"hover"),F.show(F.query("#rec_iframe")[0]))}),F.on(n,"mouseout",function(e){var t=e.relatedTarget||e.toElement;while(t!==this&&t)try{t=t.parentNode}catch(n){break}t!==this&&(F.hide(F.query("#record_container")[0]),F.hasClass(r,"hover")&&(F.removeClass(r,"hover"),F.hide(F.query("#rec_iframe")[0])))}),F.on(i,"click",function(){F.show(F.query("#place_holder")[0]),F.hide(F.query("div.toolbar")[0]);var e=video_list.local.toJson(F.cookie.getByEscape("playListTag")),t=[];for(var n in e)t.push(e[n]);video_list.cloud.set(t),F.cookie.setByEncode("recImport","true","/","v.ifeng.com")})},video_list.delAll=function(){if(window.IS_LOGIN()){F.show(F.query("div.clearplaybox")[0]),F.hide(F.query("#h_record_list")[0]);var e=F.query("#sure")[0],t=F.query("#cancel")[0];F.off(e,"click","sure"),F.off(t,"click","cancel"),F.on(e,"click",function(){F.hide(F.query("div.clear_play")[0]),video_list._delAllFlag=!0,video_list.cloud.delAll()},{nameSpace:"sure"}),F.on(t,"click",function(){F.hide(F.query("div.clearplaybox")[0]),F.show(F.query("#h_record_list")[0])},{nameSpace:"cancel"})}else video_list.local.delAll()},video_list.delOne=function(e){window.IS_LOGIN()?video_list.cloud.del(e):video_list.local.del(e)},video_list.getDevice=function(){var e=navigator.userAgent,t=navigator.platform==="Win32"||navigator.platform==="Windows",n=navigator.platform==="Mac68K"||navigator.platform==="MacPPC"||navigator.platform==="Macintosh"||navigator.platform==="MacIntel";if(n)return"pc";var r=navigator.platform==="X11"&&!t&&!n;if(r)return"pc";var i=String(navigator.platform).indexOf("Linux")>-1;if(i)return"pc";if(t){var s=e.indexOf("Windows NT 5.0")>-1||e.indexOf("Windows 2000")>-1;if(s)return"pc";var o=e.indexOf("Windows NT 5.1")>-1||e.indexOf("Windows XP")>-1;if(o)return"pc";var u=e.indexOf("Windows NT 5.2")>-1||e.indexOf("Windows 2003")>-1;if(u)return"pc"}var a=e.toLowerCase(),f=function(e,t){if(e.indexOf(t)!==-1)return!0};return f(a,"ipad")?"pad":f(a,"iphone")?"mobile":f(a,"android")&&f(a,"mobile")||f(a,"android")&&f(a,"mozilla")||f(a,"android")&&f(a,"opera")?"mobile":"pc"},video_list.local={COOKIE_DOMAIN:"v.ifeng.com",COOKIE_EXPIRES:14400,COOKIE_NAME:"playListTag",COOKIE_PATH:"/",COOKIE_SECURE:"",get:function(){var e=F.cookie.getByEscape("playListTag"),t=F.query("#h_record_list");F.html(t[0],video_list.view(e)),video_list._firstFlag&&(video_list._firstFlag=!1),F.show(F.query("#cloudNote")[0]),e!==""?(F.css(F.query("#rec_iframe")[0],"height","344px"),F.show(F.query("div.clear_play")[0]),window.IS_LOGIN()?(F.cookie.getByEncode("recImport")==="true"?(F.css(F.query("#rec_iframe")[0],"height","287px"),F.show(F.query("#place_holder")[0]),F.hide(F.query("div.toolbar")[0])):(F.show(F.query("div.toolbar")[0]),F.hide(F.query("#place_holder")[0])),F.hide(F.query("div.toolbar")[1])):(F.hide(F.query("div.toolbar")[0]),F.show(F.query("div.toolbar")[1])),F.hide(F.query("#record_loading")[0]),F.hide(F.query("div.norecord")[0]),F.show(F.query("#h_record_list")[0])):(F.css(F.query("#rec_iframe")[0],"height","344px"),F.html(F.query("#h_record_list")[0],""),F.hide(F.query("div.clear_play")[0]),window.IS_LOGIN()?(F.cookie.getByEncode("recImport")==="true"?(F.css(F.query("#rec_iframe")[0],"height","287px"),F.show(F.query("#place_holder")[0]),F.hide(F.query("div.toolbar")[0])):(F.show(F.query("div.toolbar")[0]),F.hide(F.query("#place_holder")[0])),F.hide(F.query("div.toolbar")[1])):(F.hide(F.query("div.toolbar")[0]),F.show(F.query("div.toolbar")[1]),F.hide(F.query("#record_loading")[0])),F.show(F.query("div.norecord")[0]),F.hide(F.query("#h_record_list")[0]))},set:function(e){var t=video_list.local,n={vid:e.vid,last_point:e.last_point,vurl:e.vurl,duration:e.duration,name:e.name,device:video_list.getDevice(),play_time:(new Date).getTime()},r,i,s=e.vid;if(typeof F.cookie.getByEscape("playListTag")!="undefined"&&F.cookie.getByEscape("playListTag")!==null){r=video_list.local.toJson(F.cookie.getByEscape("playListTag"));for(var o in r)if(o===s){delete r[o];break}typeof r!="object"&&(r={}),r[s]=n}else r[s]=n;i=t.COOKIE_EXPIRES;var u=[];for(var a in r){var f=r[a];f.vid=a,u.push(f)}if(u.length>5)for(var l=0,c=u.length-5;l<c;l++)delete r[u[l].vid];F.cookie.setByEscape(t.COOKIE_NAME,t.toString(r),t.COOKIE_PATH,t.COOKIE_DOMAIN,i,t.COOKIE_SECURE),window.IS_LOGIN()||video_list.local.get()},del:function(e){var t=video_list.local,n=video_list.local.toJson(F.cookie.getByEscape("playListTag"));for(var r in n)if(r===F.attr(e,"data-guid")){delete n[F.attr(e,"data-guid")];break}var i=t.COOKIE_EXPIRES;F.cookie.setByEscape(t.COOKIE_NAME,t.toString(n),t.COOKIE_PATH,t.COOKIE_DOMAIN,i,t.COOKIE_SECURE);var s=F.parent(e),o=F.parent(s);F.remove(o);var u=F.query("#h_record_list"),a=F.find(u,"li");return a.length===0&&(F.hide(F.query("div.clear_play")[0]),window.IS_LOGIN()?(F.hide(F.query("div.toolbar")[0]),F.show(F.query("div.toolbar")[1])):(F.hide(F.query("div.toolbar")[0]),F.show(F.query("div.toolbar")[1])),F.css(F.query("#rec_iframe")[0],"height","344px"),F.show(F.query("div.norecord")[0]),F.hide(F.query("#h_record_list")[0])),!1},delAll:function(){var e=video_list.local;F.html(F.query("#h_record_list")[0],""),F.hide(F.query("div.clear_play")[0]),F.css(F.query("#rec_iframe")[0],"height","344px"),window.IS_LOGIN()?(F.cookie.getByEncode("recImport")==="true"?(F.css(F.query("#rec_iframe")[0],"height","287px"),F.show(F.query("#place_holder")[0]),F.hide(F.query("div.toolbar")[0])):(F.show(F.query("div.toolbar")[0]),F.hide(F.query("#place_holder")[0])),F.hide(F.query("div.toolbar")[1])):(F.hide(F.query("div.toolbar")[0]),F.show(F.query("div.toolbar")[1])),F.show(F.query("div.norecord")[0]),F.hide(F.query("#h_record_list")[0]);var t=e.COOKIE_EXPIRES;return F.cookie.setByEscape(e.COOKIE_NAME,"",e.COOKIE_PATH,e.COOKIE_DOMAIN,t,e.COOKIE_SECURE),!1},toJson:function(value){return value?eval("("+value+")"):""},toString:function(e){var t=[],n=video_list.local,r=function(e){return typeof e=="object"&&e!==null?n.toString(e):/^(string|number)$/.test(typeof e)?"'"+e+"'":e};for(var i in e)t.push("'"+i+"':"+r(e[i]));return"{"+t.join(",")+"}"}},video_list.view=function(e){var t=[],n="",r="icon_",i,s="",o=[],u=function(e){return e=Math.round(e/1),e=((e/60+"").split(".")[0].length<2?"0"+(e/60+"").split(".")[0]:(e/60+"").split(".")[0])+" : "+(e%60<10?"0"+e%60:e%60+""),e};if(typeof e=="undefined"||e===""||e==="{}")return F.show(F.query(".norecord")[0]),F.hide(F.query("#h_record_list")[0]),F.hide(F.query(".clear_play")[0]),!1;F.hide(F.query(".norecord")[0]),e=this.local.toJson(e);for(var a in e){var f=e[a],l={};switch(f.device){case"pc":n="电脑",r="pc";break;case"pad":n="平板",r="pad";break;case"mobile":n="手机",r="mobile";break;default:n="电脑",r="pc"}var c=!0;typeof f["last_point"]!="undefined"?f.last_point===f.duration?(s="已看完",i=""):f.last_point<60?(s="观看不足1分钟",i="?starttime="+f.last_point):(s=u(f.last_point),i="?starttime="+f.last_point):typeof f["vlasttime"]!="undefined"&&(c=!1,f.vlasttime===f.duration?(s="已看完",i=""):f.vlasttime<60?(s="观看不足1分钟",i="?starttime="+f.vlasttime):(s=u(f.vlasttime),i="?starttime="+f.vlasttime)),l.vid=a,l.vurl=f.vurl,l.name=f.name,l.duration=f.duration,l.last_point=c?f.last_point:f.vlasttime,l.device=n,l.icon=r,l.timeText=s,l.time=i,o.push(l)}window.IS_LOGIN()||o.reverse();for(var h=0,p=o.length;h<p;h++){var d=o[h];t.push('<li class="js_srecord" onmouseover="F.show(F.query(\'#del_'+h+"'));F.addClass(this, 'current');\" onmouseout=\"F.hide(F.query('#del_"+h+"'));F.removeClass(this, 'current')\">"),t.push('<div class="icon_'+d.icon+'" title="'+d.device+'"></div>'),t.push('<div class="txt">'),t.push('<h4><a href="'+d.vurl+d.time+'" target="_self" title="'+d.name+'">'+d.name+"</a></h4>"),t.push('<div class="del" id="del_'+h+'" style="display:none;" onclick="video_list.delOne(this);" data-guid="'+d.vid+'">'),t.push('<a href="#">删除</a>'),t.push("</div>"),t.push("</div>"),t.push('<div class="past">'),t.push("<span>["+d.device+"] "+d.timeText+"</span>"),d.last_point!==d.duration?t.push('<a href="'+d.vurl+d.time+'" target="_self">继续观看</a>'):t.push('<a href="'+d.vurl+'" target="_self">重新观看</a>'),t.push("</div>"),t.push("</li>")}return t.join("")},video_list.cloud={counts:0,contesSend:1,_firstFlag:!0,importFlag:!0,setFlag:!0,url:"http://prc.ifeng.com/playRecord",param:{username:"",appid:10},get:function(e){if(window.IS_LOGIN()){video_list._firstFlag&&(video_list._firstFlag=!1,F.css(F.query("#rec_iframe")[0],"height","287px"),F.show(F.query("#record_loading")[0]),F.hide(F.query("div.norecord")[0]),F.hide(F.query("#h_record_list")[0]),F.hide(F.query("div.clear_play")[0]));if(video_list._delAllFlag){video_list._delAllFlag=!1,F.css(F.query("#rec_iframe")[0],"height","287px"),F.hide(F.query("div.clearplaybox")[0]),F.show(F.query("div.norecord")[0]),F.hide(F.query("#h_record_list")[0]);return}F.cookie.getByEncode("recImport")==="true"?(F.css(F.query("#rec_iframe")[0],"height","287px"),F.show(F.query("#place_holder")[0]),F.hide(F.query("div.toolbar")[0])):(F.show(F.query("div.toolbar")[0]),F.hide(F.query("#place_holder")[0])),F.hide(F.query("div.toolbar")[1]),F.hide(F.query("#cloudNote")[0]);var t=video_list.cloud,n=F.extend(t.param);n.username=commonHeader.getUname(),n.start=0,n.limit=10,F.ajax({url:t.url+"/getList",data:n,dataType:"jsonp",success:function(n){var r=function(n){F.hide(F.query("#record_loading")[0]);if(typeof n=="object"&&n.data.total>0){F.css(F.query("#rec_iframe")[0],"height","317px"),F.show(F.query("div.clear_play")[0]),F.show(F.query("#h_record_list")[0]),F.cookie.getByEncode("recImport")==="true"?(F.css(F.query("#rec_iframe")[0],"height","287px"),F.show(F.query("#place_holder")[0]),F.hide(F.query("div.toolbar")[0])):(F.show(F.query("div.toolbar")[0]),F.hide(F.query("#place_holder")[0])),F.hide(F.query("div.toolbar")[1]);var r=n.data.list,i=[];for(var s=0,o=r.length;s<o;s++){var u=r[s],a=[],f=!1;for(var l in u){if(typeof u[l]=="undefined"||u[l]==="undefined"||u[l]===""||u[l]==="NaN"){f=!0;break}a.push('"'+l+'":"'+decodeURIComponent(u[l])+'"')}f||i.push('"'+u.vid+'":{'+a.join(",")+"}")}return t.importFlag=!0,"{"+i.join(",")+"}"}if(typeof e!="undefined"&&e!==11)return F.show(F.query("#record_loading")[0]),F.hide(F.query("div.norecord")[0]),F.hide(F.query("#h_record_list")[0]),"getAgain";t.importFlag=!0,F.css(F.query("#rec_iframe")[0],"height","287px")},i=r(n);if(i!=="getAgain"){var s=F.query("#h_record_list");F.html(s[0],video_list.view(i)),F.css(F.query("div.clearplaybox")[0],"display")==="block"&&F.hide(s[0])}typeof e!="undefined"&&n.data.total===0&&e<11&&setTimeout(function(){e++,t.get(e)},1e3)}})}},set:function(e){var t=video_list.cloud,n=F.extend(t.param);n.username=commonHeader.getUname(),n.sid=F.cookie.getByEncode("sid"),n.device=video_list.getDevice();var r=function(e,r){if(window.IS_LOGIN()){if(typeof r=="undefined"){r=function(){};if(t.setFlag)t.setFlag=!1,setTimeout(function(){t.setFlag=!0},15e3);else if(e.duration!==parseInt(e.last_point,10))return}n.duration=e.duration,n.last_point=parseInt(e.last_point,10),n.vid=e.vid,n.played_time=(new Date).getTime(),n.comefrom=e.vurl,n.platform="",n.extend="",n.flag="",n.column="",n.name=e.name,n.vurl=e.vurl,F.ajax({url:t.url+"/addItem",data:n,dataType:"jsonp",success:r})}},i=function(e){if(t.importFlag){t.importFlag=!1,setTimeout(function(){t.importFlag=!0},1e4);if(window.IS_LOGIN()){var n=[],i=e.length;i>0&&(F.css(F.query("#rec_iframe")[0],"height","287px"),F.show(F.query("#record_loading")[0]),F.hide(F.query("div.norecord")[0]),F.hide(F.query("#h_record_list")[0]),F.hide(F.query("div.clear_play")[0]));for(var s=0;s<i;s++){var o=e[s];(function(e,n){var s={};s.vid=e.vid;var o="0";typeof e.vlasttime!="undefined"?o=e.vlasttime:o=e.last_point,s.last_point=parseInt(o,10),s.comefrom=e.vurl,s.played_time=e.play_time||"",s.column="",s.extend="",s.flag="",s.name=e.name,s.vurl=e.vurl,s.duration=e.duration,r(s,function(){n===i-1&&setTimeout(function(){t.get(1)},100)})})(o,s)}}}};e instanceof Array?i(e):r(e)},del:function(e){var t=video_list.cloud,n=F.extend(t.param);n.sid=F.cookie.getByEncode("sid"),n.vid=F.attr(e,"data-guid"),n.username=commonHeader.getUname(),F.ajax({url:t.url+"/delItem",data:n,dataType:"jsonp",success:function(t){if(t.code==="1"){var n=F.parent(e),r=F.parent(n);F.remove(r);var i=F.query("#h_record_list"),s=F.find(i,"li");s.length===0&&(F.hide(F.query("div.clear_play")[0]),F.css(F.query("#rec_iframe")[0],"height","317px"),window.IS_LOGIN()?(F.hide(F.query("div.toolbar")[1]),F.cookie.getByEncode("recImport")==="true"?(F.css(F.query("#rec_iframe")[0],"height","287px"),F.show(F.query("#place_holder")[0]),F.hide(F.query("div.toolbar")[0])):(F.show(F.query("div.toolbar")[0]),F.hide(F.query("#place_holder")[0]))):(F.hide(F.query("div.toolbar")[0]),F.show(F.query("div.toolbar")[1])),F.show(F.query("div.norecord")[0]),F.hide(F.query("#h_record_list")[0]))}}})},delAll:function(){var e=video_list.cloud,t=F.extend(e.param);t.sid=F.cookie.getByEncode("sid"),t.username=commonHeader.getUname(),F.css(F.query("#rec_iframe")[0],"height","287px"),F.ajax({url:e.url+"/reset",data:t,dataType:"jsonp",success:function(){e.get()}})},toString:function(e){var t=video_list.cloud;if(e instanceof Array){var n="";for(var r=0,i=e.length;r<i;r++)r===0?n+="[":n+=",",n+=t.toString(e[r]),r===i-1&&(n+="]");return n}var s=[],o=function(e){if(typeof e=="object"&&e!==null)return t.toString(e);e=/^(string|number)$/.test(typeof e)?'"'+e+'"':e;if(typeof e!="undefined")return e.replace(/\//g,"\\/")};for(var u in e)s.push('"'+u+'":'+o(e[u]));return"{"+s.join(",")+"}"}},video_list.init(),video_list}();(function(e,t){"use strict";var n=function(e){var t=0;if(null!=e&&e==e.window){var n=e.document.documentElement.clientHeight;t=e.document.compatMode==="CSS1Compat"&&n||e.document.body.clientHeight||n}return t},r=n(window),i=function(){var e=document.getElementsByTagName("img"),t,n=F.scrollTop(window),i,s;for(var o=0,u=e.length;o<u;o++)t=e[o],t.className==="lazy_img"&&(i=F.offset(t).top,s=F.height(t),s!==0&&i>n-s&&i<n+r&&(t.src=t.getAttribute
("data-src"),t.className=""))};F.on(t,"scroll",i),F.on(t,"resize",function(){r=n(window)}),i(),F.on("body","mouseenter",function(){F.preppend(this,'<span class="photos_shadow"><i></i></span>'),F.removeClass(this,"js_border")},{delegate:".js_border"});if(typeof device!="undeifned"&&device.type==="pad"){var s=F.query("#js_top")[0],o=F.query("#v_code")[0];if(typeof s!="undefined"&&typeof o!="undefined"){var u=function(){F.scrollTop(window)>200?F.show(o):F.hide(o)};u(),F.on(window,"scroll",function(){u()}),F.on(s,"click",function(){return F.scrollTop(window,0),!1})}}else if(device.type==="pc"){var a=F.query("#js_top")[0];typeof a!="undefined"&&F.on(a,"click",function(){F.scrollTop(window,0)})}})(document,window),function(){"use strict";var e={params:{urls:{getPlaybillUrl:"http://v.ifeng.com/live/js/vindex.js"},zixunDomId:"zixun",zixunDom:null,zhongwenDomId:"zhongwen",zhongwenDom:null,xianggangDomId:"xianggangtai",xianggangDom:null,loadingDom:null},model:{},view:{},controller:{}};e.params.init=function(){var t=e.params;return t.zixunDom=F.query("#"+t.zixunDomId)[0],t.zhongwenDom=F.query("#"+t.zhongwenDomId)[0],t.xianggangDom=F.query("#"+t.xianggangDomId)[0],t.loadingDom=F.query("#tvload")[0],typeof t.zixunDom=="undefined"?!1:typeof t.zhongwenDom=="undefined"?!1:typeof t.xianggangDom=="undefined"?!1:typeof t.loadingDom=="undefined"?!1:!0},e.view.singleContent=function(e){var t=[];return t.push('<span class="tc">'),t.push('<a href="'+e.linkurl+'" target="_blank">'+e.name+"</a>"),t.push("</span>"),t.join("")},e.model.getPlaybill=function(t){var n=e.params;F.ajax({url:n.urls.getPlaybillUrl,dataType:"script",success:function(){t(phtvindexjs)}})},e.model.getContentByCurTime=function(e){var t=null,n=new Date,r=n.getFullYear(),i=n.getMonth()+1,s=n.getDate(),o=n.getHours(),u=n.getMinutes(),a=0,f=function(e){return e<10?"0"+e:""+e},l=r+"/"+i+"/"+s+" "+f(o)+":"+f(u)+":"+f(a);return F.each(e,function(e,n){var r=n.stime,i=n.endtime;if(r<=l&&l<=i)return t=n,!1}),t},e.controller.init=function(){var t=e.model,n=e.view,r=e.params;r.init()&&(F.show(r.loadingDom),t.getPlaybill(function(e){var i=t.getContentByCurTime(e.zhongwentai),s=t.getContentByCurTime(e.zixuntai),o=t.getContentByCurTime(e.xianggangtai);F.html(r.zhongwenDom,n.singleContent(i)),F.html(r.xianggangDom,n.singleContent(o)),F.html(r.zixunDom,n.singleContent(s)),F.hide(r.loadingDom)}))},e.controller.init()}(),function(){"use strict";var e={params:{favDomId:"js_favorite",favDom:null},model:{},view:{},controller:{}};e.params.init=function(){var t=e.params;return t.favDom=F.query("#"+t.favDomId)[0],typeof t.favDom=="undefined"||device.type==="pad"?!1:!0},e.model.getUserAgentInfo=function(){var e=navigator.userAgent.toLowerCase(),t=function(){try{return window.external.max_version.substr(0,1)}catch(e){return undefined}},n=t();if(n)return{name:"maxthon",version:n};var r=[{expStr:/(ipad)[ |\/]*(\d*[.\d*]*)/i,name:"ipad"},{expStr:/(iphone os)[ |\/]*(\d*[.\d*]*)/i,name:"iphone os"},{expStr:/(midp)[ |\/]*(\d*[.\d*]*)/i,name:"midp"},{expStr:/(ucweb)[ |\/]*(\d*[.\d*]*)/i,name:"ucweb"},{expStr:/(android)[ |\/]*(\d*[.\d*]*)/i,name:"android"},{expStr:/(windows ce)[ |\/]*(\d*[.\d*]*)/i,name:"windows ce"},{expStr:/(windows mobile)[ |\/]*(\d*[.\d*]*)/i,name:"windows mobile"},{expStr:/(msie)[ |\/]*(\d*[.\d*]*)/i,name:"msie"},{expStr:/(opera)[ |\/]*(\d*[.\d*]*)/i,name:"opera"},{expStr:/(chrome)[ |\/]*(\d*[.\d*]*)/i,name:"chrome"},{expStr:/(firefox)[ |\/]*(\d*[.\d*]*)/i,name:"firefox"},{expStr:/(safari)[ |\/]*(\d*[.\d*]*)/i,name:"safari"}];for(var i=0,s=r.length;i<s;i++){var o=r[i],u=e.match(o.expStr);if(u instanceof Array&&u.length>1&&u[1]===o.name)return{name:u[1],version:u[2]}}return null},e.view.ieFav=function(){var e=[];return e.push('<div class="collect" style="display:block;">'),e.push('<a id="js_ie_favorite" href="javascript:void(0);">想及时获取海量视频资讯？按ctrl+d收藏我吧！</a>'),e.push("</div>"),e.join("")},e.view.otherFav=function(){var e=[];return e.push('<div class="collect_chrome" style="display:block;">'),e.push('<a href="javascript:void(0);">想及时获取海量视频资讯？按ctrl+d收藏我吧！</a>'),e.push("</div>"),e.join("")},e.controller.init=function(){var t=e.params,n=e.model,r=e.view,i=e.controller;if(t.init()){var s=n.getUserAgentInfo();s&&(s.name==="msie"?(F.html(t.favDom,r.ieFav()),i.ieFavEvent()):F.html(t.favDom,r.otherFav()))}},e.controller.ieFavEvent=function(){var e=F.query("#js_ie_favorite")[0];F.on(e,"click",function(){var e=window.location.href;try{window.external.addToFavoritesBar(e,"凤凰视频","slice")}catch(t){window.external.addFavorite(e,"凤凰视频")}return!1})},e.controller.init()}()